//Include some error related C header?
#include <errno.h>

#provided int errno

struct error (
	int			code,
	@byte		msg
)

fn error:get_c(){
	$..code = errno
	$..msg = strerror(errno)
	ret $
}

fn error:set(int code, @byte msg){
	$..code = code
	$..msg = msg
	ret $
}

fn error:ok(){
  ret !($..code.(bool))
}

fn error:reset(){
	$..code = 0
}

{
	err = error{0, "No error"}
	errptr = err@
}
// err:=error{code=0, msg="No error"}
// errptr:=err@

